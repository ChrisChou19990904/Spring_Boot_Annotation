<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>PostgreSQL vs H2 技術比較文件</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 40px;
      background-color: #f6f8fa;
      color: #1f2328;
      line-height: 1.6;
    }
    h1, h2, h3 {
      border-bottom: 1px solid #d0d7de;
      padding-bottom: 6px;
    }
    h1{
      text-align: center;
    }
    code {
      background-color: #eaeef2;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: Consolas, monospace;
    }
    pre {
      background-color: #0d1117;
      color: #c9d1d9;
      padding: 16px;
      border-radius: 6px;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
    }
    th, td {
      border: 1px solid #d0d7de;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #eaeef2;
    }
    .tag {
      display: inline-block;
      background-color: #0969da;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 12px;
    }
    .warning {
      background-color: #fff8c5;
      padding: 10px;
      border-left: 4px solid #d4a72c;
    }
    .success {
      background-color: #dafbe1;
      padding: 10px;
      border-left: 4px solid #2da44e;
    }
    nav {
      text-align: left;
      background-color: pink;
    }
    a{
      color: #2980b9;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    a:visited {
      color: #2980b9;
    }
    #social-share a {
      text-decoration: none;
      font-weight: bold;
    }
    #social-share a:hover {
      text-decoration: underline;
    }
    #social-share span {
      margin: 0 5px;
    }
    #social-share a#fb-share {
      color: #4267B2;
    }
    #social-share a#line-share {
      color: #00C300;
    }
    #social-share a#twitter-share {
      color: #1DA1F2;
    }
    @media screen and (max-width: 767px) {
      img{
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
<div id="google-translate-box">
  <div id="google_translate_element"></div>
  <!-- Google Translate 的自動翻譯功能 -->
  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'zh-TW',  // 頁面原語言
        includedLanguages: 'en,es,fr,de,it,zh-CN,ja,ko,th,vi,my,id,ms,ar,he,ru,tg,uk,hi,tr,pt,nl,is,fi,sv,no,ro,kk,bo,mn,la,fil,tl,el',  // 支援的翻譯語言（可擴展）
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <p>點擊上方的語言選單以切換語言</p>
</div>
<nav>
  <h2>本專案的其他內容</h2>
  <ol>
    <li><a href="index.html" target="_blank">Spring Boot 常用註解速查表</a></li>
    <li><a href="point_of_jparepository.html" target="_blank">Spring Boot 中的 JpaRepository 簡介</a></li>
    <li><a href="link_sharing.html" target="_blank">社群平台連結追蹤與隱私完整解析</a></li>
    <li><a href="html_vs_vue.html" target="_blank">HTML 與 Vue 的結構差異說明（含四種架構示意圖）</a></li>
    <li><a href="vue_vs_multiple_html.html" target="_blank">Vue 與多頁 HTML 架構的差異與對應</a></li>
    <li><a href="how_to_connect_spring_boot_to_vue3.html" target="_blank">Spring Boot 後端串接 Vue3 前端完整教學（含 Supabase PostgreSQL）</a></li>
    <li><a href="deployment_and_anchor_navigation.html" target="_blank">Vue3 與純 HTML 在部署與錨點導航上的差異</a></li>
    <li><a href="Vue_DevTools.html" target="_blank">Vue DevTools 深度解析與開發痛點解決</a></li>
    <li><a href="entity_and_dto.html" target="_blank">Spring Boot 教學：Entity、DTO、RequestDTO、ResponseDTO 與資料流</a></li>
    <li><a href="HTTP_ERROR.html" target="_blank">本地全端開發 HTTP 錯誤說明</a></li>
    <li><a href="About_Test.html" target="_blank">軟體品質與測試規範說明</a></li>
    <li><a href="Full_Stack_Architecture_Guide.html" target="_blank">全端部署架構與技術演進全紀錄 - 外語書商城</a></li>
    <li><a href="Two_Steps_Of_Learning_How_To_Code.html" target="_blank">學程式的二個階段與輸入工具的角色</a></li>
    <li><a href="misunderstanding_of_learning_how_to_code.html" target="_blank">學程式的階段、誤導與正確使用 AI 的方式</a></li>
    <li><a href="RFC_3986_URL.html" target="_blank">RFC 3986 URL 編碼規範完整說明</a></li>
    <li><a href="html-whitespace-collapsing-explanation.html" target="_blank">HTML 空白折疊與自動換行說明文件</a></li>
    <li><a href="windows-screen-recording-issue.html" target="_blank">Windows 內建螢幕錄影與下拉選單說明</a></li>
    <li><a href="crypto_notes.html" target="_blank">密碼學口試重點筆記</a></li>
    <li><a href="Difference_Among_Docker_Frontend_Deployment_And_Backend_Deployment.html" target="_blank">Docker、前端與後端部署完整說明文件</a></li>
  </ol>
</nav>
<h1>PostgreSQL vs H2 技術比較文件</h1>

<p>
  本文針對 <strong>Spring Boot 雲端部署環境</strong>，
  分析 PostgreSQL 與 H2 在架構、效能、持久化與實務應用上的差異。
</p>

<hr>

<h2>1. 系統定位差異（System Positioning）</h2>

<table>
  <thead>
  <tr>
    <th>比較維度</th>
    <th>PostgreSQL</th>
    <th>H2</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>產品定位</td>
    <td>Production-Grade RDBMS（伺服器型）</td>
    <td>Lightweight Embedded Database</td>
  </tr>
  <tr>
    <td>主要使用場景</td>
    <td>正式環境 / 雲端部署 / 多使用者系統</td>
    <td>本地開發 / 單元測試 / Demo</td>
  </tr>
  <tr>
    <td>架構模式</td>
    <td>Client-Server 架構</td>
    <td>Embedded / In-Memory 模式</td>
  </tr>
  <tr>
    <td>資料持久化能力</td>
    <td>WAL（Write-Ahead Logging）確保高可靠性</td>
    <td>依運行模式而定（Memory 模式會隨 JVM 終止而消失）</td>
  </tr>
  </tbody>
</table>

<hr>

<h2>2. 架構層級比較（Architectural Comparison）</h2>

<h3>2.1 PostgreSQL 架構模型</h3>

<pre>
Client
   ↓
Application Layer (Spring Boot)
   ↓
PostgreSQL Server (Independent Process)
   ↓
Disk Storage (WAL + Data Files)
</pre>

<div class="success">
  特性：
  <ul>
    <li>支援 ACID 交易模型</li>
    <li>完整交易隔離等級</li>
    <li>高併發處理能力</li>
    <li>適用於雲端多實例部署</li>
  </ul>
</div>

<h3>2.2 H2 Embedded 架構模型</h3>

<pre>
Application Layer (Spring Boot)
   ↓
H2 Engine (Within JVM Process)
   ↓
Memory or Local File
</pre>

<div class="warning">
  H2 Embedded 屬於應用程式內部資料庫，
  其生命週期與 JVM 綁定，不具備獨立資料服務能力。
</div>

<hr>

<h2>3. Spring Boot 整合層差異（Integration Layer）</h2>

<h3>3.1 H2 設定範例</h3>

<pre>
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
</pre>

<ul>
  <li>零安裝、零外部依賴</li>
  <li>啟動速度快</li>
  <li>適合 CI / Unit Test 環境</li>
</ul>

<h3>3.2 PostgreSQL 設定範例</h3>

<pre>
spring.datasource.url=jdbc:postgresql://host:5432/db
spring.datasource.username=username
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
</pre>

<ul>
  <li>資料持久化於獨立資料服務</li>
  <li>支援多實例存取</li>
  <li>適合 Production 環境</li>
</ul>

<hr>

<h2>4. 效能與擴充性（Performance & Scalability）</h2>

<table>
  <thead>
  <tr>
    <th>指標</th>
    <th>PostgreSQL</th>
    <th>H2</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>高併發處理</td>
    <td>強（多進程架構）</td>
    <td>弱（JVM 內共享）</td>
  </tr>
  <tr>
    <td>大型資料支援</td>
    <td>可達 TB 等級</td>
    <td>不適合大型資料量</td>
  </tr>
  <tr>
    <td>查詢優化器</td>
    <td>成熟 Query Planner</td>
    <td>簡化版本</td>
  </tr>
  <tr>
    <td>水平擴充能力</td>
    <td>支援 Replication / Cluster</td>
    <td>不支援分散式節點</td>
  </tr>
  </tbody>
</table>

<hr>

<h2>5. 雲端部署情境分析（Cloud Deployment Analysis）</h2>

<h3>5.1 單實例部署（Single Instance Behavior）</h3>

<pre>
Client
   ↓
Cloud Container (Single JVM)
   ↓
H2 In-Memory
</pre>

<p>
  在單實例部署下，所有請求皆導向同一 JVM。
  因此 H2 記憶體資料可被不同裝置共享。
</p>

<div class="warning">
  此行為僅為「單節點共享」，
  並非真正的 Shared Persistent Layer。
</div>

<h3>5.2 多實例部署（Horizontal Scaling Scenario）</h3>

<pre>
Client ──▶ Instance A ──▶ H2 Memory A
Client ──▶ Instance B ──▶ H2 Memory B
</pre>

<p>
  當系統啟用多實例部署時：
</p>

<ul>
  <li>各實例資料彼此獨立</li>
  <li>可能發生資料不一致</li>
  <li>實例重啟將導致資料遺失</li>
</ul>

<div class="warning">
  H2 In-Memory 屬於 Process-Level Persistence，
  不具備跨節點一致性能力。
</div>

<h3>5.3 PostgreSQL 作為共享持久層</h3>

<pre>
Client
   ↓
Multiple Spring Boot Instances
   ↓
External PostgreSQL Service
   ↓
Persistent Storage
</pre>

<ul>
  <li>跨實例資料一致性</li>
  <li>服務重啟不影響資料</li>
  <li>可支援未來讀寫分離與叢集架構</li>
</ul>

<hr>

<h2>6. 架構決策總結（Architecture Decision）</h2>

<table>
  <thead>
  <tr>
    <th>部署情境</th>
    <th>建議資料庫</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>本地開發</td>
    <td>H2</td>
  </tr>
  <tr>
    <td>CI / 測試環境</td>
    <td>H2</td>
  </tr>
  <tr>
    <td>雲端正式環境</td>
    <td>PostgreSQL</td>
  </tr>
  </tbody>
</table>

<p>
  結論：<br>
  H2 屬於開發工具型資料庫；<br>
  PostgreSQL 屬於生產級資料持久層。
</p>

<hr>
<ul id="messages"></ul>
<div id="social-share" style="margin-top: 20px;">
  <a id="fb-share" href="#" target="_blank" style="color: #4267B2; font-weight: bold;">分享到 Facebook</a>
  <span> | </span>
  <a id="line-share" href="#" target="_blank" style="color: #00C300; font-weight: bold;">分享到 Line</a>
  <span> | </span>
  <a id="twitter-share" href="#" target="_blank" style="color: #1DA1F2; font-weight: bold;">分享到 X</a>
</div>
<script>
  // 自動抓取當前頁面的 URL
  var currentUrl = window.location.href;
  // Facebook 分享
  document.getElementById("fb-share").href =
          "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(currentUrl);
  // Line 分享
  document.getElementById("line-share").href =
          "https://social-plugins.line.me/lineit/share?url=" + encodeURIComponent(currentUrl);
  // X (Twitter) 分享
  document.getElementById("twitter-share").href =
          "https://twitter.com/intent/tweet?url=" + encodeURIComponent(currentUrl) + "&text=你的文章標題";
</script>
<footer style="text-align: center; background-color: purple; color:yellow; font-size: 50px">
  作者：<a href="https://www.facebook.com/profile.php?id=100056441813114&locale=zh_TW" target="_blank" style="color:white;">周彥廷</a>
  <br>創作日期：西元二零二六年二月二十七日<br>
  <img width="540" height="720" src="my_appearance2.jpg" alt="自拍">
  <br>
</footer>
<footer>
  <p style="font-size: 12px; color: #57606a;">
    Technical Documentation | Spring Boot Cloud Deployment Architecture Analysis
  </p>
</footer>

</body>
</html>