<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°å…¨ç«¯é–‹ç™¼ HTTP éŒ¯èª¤èªªæ˜</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
            "Noto Sans TC", Arial, sans-serif;
            line-height: 1.7;
            padding: 24px;
            background-color: #f9fafb;
            color: #333;
        }
        h1, h2, h3 {
            color: #1f2937;
        }
        .card {
            background: #fff;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        code, pre {
            font-family: Consolas, monospace;
            background: #f3f4f6;
            padding: 4px 6px;
            border-radius: 4px;
        }
        pre {
            padding: 12px;
            overflow-x: auto;
        }
        .tip {
            background: #eef2ff;
            border-left: 4px solid #6366f1;
            padding: 14px 18px;
            margin-top: 16px;
        }
        .warn {
            background: #fff7ed;
            border-left: 4px solid #f97316;
            padding: 14px 18px;
            margin-top: 16px;
        }
        a{
            color: #2980b9;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        a:visited {
            color: #2980b9;
        }
        nav{
            background-color: pink;
        }
        #social-share a {
            text-decoration: none;
            font-weight: bold;
        }
        #social-share a:hover {
            text-decoration: underline;
        }
        #social-share span {
            margin: 0 5px;
        }
        #social-share a#fb-share {
            color: #4267B2;
        }
        #social-share a#line-share {
            color: #00C300;
        }
        #social-share a#twitter-share {
            color: #1DA1F2;
        }
        /* çµè«–è¡¨æ ¼å°ˆç”¨æ¨£å¼ */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.95em;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* å¢åŠ è¼•å¾®é™°å½±ï¼Œæå‡å±¤æ¬¡æ„Ÿ */
            border-radius: 8px;
            overflow: hidden; /* ç¢ºä¿åœ“è§’æ•ˆæœ */
        }

        thead tr {
            background-color: #35495e; /* æ·±è—è‰²èƒŒæ™¯ï¼Œé¡¯å¾—æ²ˆç©©å°ˆæ¥­ */
            color: #ffffff;
            text-align: left;
            font-weight: bold;
        }

        th, td {
            padding: 12px 15px;
            border: 1px solid #eeeeee;
        }

        tbody tr {
            border-bottom: 1px solid #dddddd;
            transition: background-color 0.2s ease; /* å¹³æ»‘éæ¸¡æ•ˆæœ */
        }

        tbody tr:nth-of-type(even) {
            background-color: #f8f9fa; /* éš”è¡Œè®Šè‰²ï¼Œå¢åŠ æ˜“è®€æ€§ */
        }

        tbody tr:last-of-type {
            border-bottom: 2px solid #42b883; /* åº•éƒ¨ä½¿ç”¨ Vue ç¶ è‰²é»ç¶´ */
        }

        tbody tr:hover {
            background-color: #f1fdf5; /* æ»‘é¼ æ‡¸åœæ™‚è®Šç‚ºæ·¡ç¶ è‰²ï¼Œå¢åŠ äº’å‹•æ„Ÿ */
        }

        /* å¼·èª¿æ–‡å­—æ¨£å¼ */
        td strong {
            color: #2c3e50;
            border-bottom: 2px solid #42b883;
        }

        /* éŸ¿æ‡‰å¼ï¼šæ‰‹æ©Ÿç‰ˆè‡ªå‹•æ²å‹• */
        @media screen and (max-width: 600px) {
            table {
                display: block;
                overflow-x: auto;
            }
        }
        @media screen and (max-width: 767px) {
            img{
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
<div id="google-translate-box">
    <div id="google_translate_element"></div>
    <!-- Google Translate çš„è‡ªå‹•ç¿»è­¯åŠŸèƒ½ -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'zh-TW',  // é é¢åŸèªè¨€
                includedLanguages: 'en,es,fr,de,it,zh-CN,ja,ko,th,vi,my,id,ms,ar,he,ru,tg,uk,hi,tr,pt,nl,is,fi,sv,no,ro,kk,bo,mn,la,fil,tl,el',  // æ”¯æ´çš„ç¿»è­¯èªè¨€ï¼ˆå¯æ“´å±•ï¼‰
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <p>é»æ“Šä¸Šæ–¹çš„èªè¨€é¸å–®ä»¥åˆ‡æ›èªè¨€</p>
</div>
<nav>
    <h2>æœ¬å°ˆæ¡ˆçš„å…¶ä»–å…§å®¹</h2>
    <ol>
        <li><a href="index.html" target="_blank">Spring Boot å¸¸ç”¨è¨»è§£é€ŸæŸ¥è¡¨</a></li>
        <li><a href="point_of_jparepository.html" target="_blank">Spring Boot ä¸­çš„ JpaRepository ç°¡ä»‹</a></li>
        <li><a href="link_sharing.html" target="_blank">ç¤¾ç¾¤å¹³å°é€£çµè¿½è¹¤èˆ‡éš±ç§å®Œæ•´è§£æ</a></li>
        <li><a href="html_vs_vue.html" target="_blank">HTML èˆ‡ Vue çš„çµæ§‹å·®ç•°èªªæ˜ï¼ˆå«å››ç¨®æ¶æ§‹ç¤ºæ„åœ–ï¼‰</a></li>
        <li><a href="vue_vs_multiple_html.html" target="_blank">Vue èˆ‡å¤šé  HTML æ¶æ§‹çš„å·®ç•°èˆ‡å°æ‡‰</a></li>
        <li><a href="how_to_connect_spring_boot_to_vue3.html" target="_blank">Spring Boot å¾Œç«¯ä¸²æ¥ Vue3 å‰ç«¯å®Œæ•´æ•™å­¸ï¼ˆå« Supabase PostgreSQLï¼‰</a></li>
        <li><a href="deployment_and_anchor_navigation.html" target="_blank">Vue3 èˆ‡ç´” HTML åœ¨éƒ¨ç½²èˆ‡éŒ¨é»å°èˆªä¸Šçš„å·®ç•°</a></li>
        <li><a href="Vue_DevTools.html" target="_blank">Vue DevTools æ·±åº¦è§£æèˆ‡é–‹ç™¼ç—›é»è§£æ±º</a></li>
        <li><a href="entity_and_dto.html" target="_blank">Spring Boot æ•™å­¸ï¼šEntityã€DTOã€RequestDTOã€ResponseDTO èˆ‡è³‡æ–™æµ</a></li>
        <li><a href="About_Test.html" target="_blank">è»Ÿé«”å“è³ªèˆ‡æ¸¬è©¦è¦ç¯„èªªæ˜</a></li>
        <li><a href="Full_Stack_Architecture_Guide.html" target="_blank">å…¨ç«¯éƒ¨ç½²æ¶æ§‹èˆ‡æŠ€è¡“æ¼”é€²å…¨ç´€éŒ„ - å¤–èªæ›¸å•†åŸ</a></li>
        <li><a href="Two_Steps_Of_Learning_How_To_Code.html" target="_blank">å­¸ç¨‹å¼çš„äºŒå€‹éšæ®µèˆ‡è¼¸å…¥å·¥å…·çš„è§’è‰²</a></li>
        <li><a href="misunderstanding_of_learning_how_to_code.html" target="_blank">å­¸ç¨‹å¼çš„éšæ®µã€èª¤å°èˆ‡æ­£ç¢ºä½¿ç”¨ AI çš„æ–¹å¼</a></li>
        <li><a href="RFC_3986_URL.html" target="_blank">RFC 3986 URL ç·¨ç¢¼è¦ç¯„å®Œæ•´èªªæ˜</a></li>
        <li><a href="html-whitespace-collapsing-explanation.html" target="_blank">HTML ç©ºç™½æŠ˜ç–Šèˆ‡è‡ªå‹•æ›è¡Œèªªæ˜æ–‡ä»¶</a></li>
        <li><a href="windows-screen-recording-issue.html" target="_blank">Windows å…§å»ºè¢å¹•éŒ„å½±èˆ‡ä¸‹æ‹‰é¸å–®èªªæ˜</a></li>
        <li><a href="crypto_notes.html" target="_blank">å¯†ç¢¼å­¸å£è©¦é‡é»ç­†è¨˜</a></li>
        <li><a href="Difference_Among_Docker_Frontend_Deployment_And_Backend_Deployment.html" target="_blank">Dockerã€å‰ç«¯èˆ‡å¾Œç«¯éƒ¨ç½²å®Œæ•´èªªæ˜æ–‡ä»¶</a></li>
        <li><a href="PostgreSQL_vs_H2.html" target="_blank">PostgreSQL vs H2 æŠ€è¡“æ¯”è¼ƒæ–‡ä»¶</a></li>
    </ol>
</nav>
<h1>æœ¬åœ°å…¨ç«¯é–‹ç™¼ HTTP éŒ¯èª¤èªªæ˜</h1>
<p>
    é©ç”¨æŠ€è¡“æ£§ï¼š<strong>Spring Boot + Spring Security + JWT + Vue3</strong><br>
    ä½¿ç”¨æƒ…å¢ƒï¼šå‰å¾Œç«¯åˆ†é›¢ã€æœ¬åœ°é–‹ç™¼ï¼ˆlocalhost ä¸åŒ portï¼‰
</p>

<!-- åŸºæœ¬ç‹€æ…‹ç¢¼ -->
<div class="card">
    <h2>å¸¸è¦‹ HTTP ç‹€æ…‹ç¢¼</h2>

    <h3>400 Bad Request</h3>
    <p>è«‹æ±‚æ ¼å¼éŒ¯èª¤ï¼Œå¾Œç«¯ç„¡æ³•è§£æã€‚</p>
    <ul>
        <li>JSON æ ¼å¼éŒ¯èª¤æˆ–ç¼ºæ¬„ä½</li>
        <li>Content-Type æœªè¨­ç‚º application/json</li>
        <li>@RequestBody å°æ‡‰å¤±æ•—</li>
    </ul>
    <p><strong>ä¸€å¥è©±ï¼š</strong>ä½ é€çš„è³‡æ–™ä¸å°ã€‚</p>

    <h3>401 Unauthorized</h3>
    <p>é©—è­‰å¤±æ•—ï¼Œä¼ºæœå™¨ä¸çŸ¥é“ä½ æ˜¯èª°ã€‚</p>
    <ul>
        <li>æœªç™»å…¥</li>
        <li>JWT éæœŸæˆ–ç„¡æ•ˆ</li>
    </ul>

    <h3>403 Forbidden</h3>
    <p>å·²é€šéé©—è­‰ï¼Œä½†æ²’æœ‰æ¬Šé™å­˜å–ã€‚</p>
    <ul>
        <li>è§’è‰² / æ¬Šé™ä¸è¶³</li>
        <li>JWT scope ä¸å¤ </li>
        <li>IP æˆ– CORS è¢«æ“‹</li>
    </ul>
    <p><strong>ä¸€å¥è©±ï¼š</strong>æˆ‘çŸ¥é“ä½ æ˜¯èª°ï¼Œä½†ä½ ä¸èƒ½ã€‚</p>

    <h3>500 Internal Server Error</h3>
    <p>ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤ã€‚</p>
    <ul>
        <li>ç¨‹å¼ä¾‹å¤–</li>
        <li>è³‡æ–™åº«æˆ–å¤–éƒ¨æœå‹™éŒ¯èª¤</li>
    </ul>
</div>

<!-- æœ¬åœ°é–‹ç™¼ 403 é‡é» -->
<div class="card">
    <h2>æœ¬åœ°é–‹ç™¼æ™‚ 403 çš„çœŸå¯¦åŸå› ï¼ˆé«˜å‘½ä¸­ç‡ï¼‰</h2>

    <h3>1ï¸âƒ£ è«‹æ±‚æ ¹æœ¬æ²’é€²åˆ° Controller</h3>
    <p>
        å¦‚æœä½ æ”¹äº†å¾ˆå¤š auth / jwt / service é¡åˆ¥éƒ½æ²’æ•ˆæœï¼Œ<strong>ä»£è¡¨è«‹æ±‚åœ¨ Spring Security Filter å°±è¢«æ“‹æ‰äº†</strong>ã€‚
    </p>

    <div class="warn">
        âŒ å•é¡Œé€šå¸¸ä¸åœ¨ JWT é‚è¼¯<br>
        âœ… å•é¡Œåœ¨ Filter / CORS / CSRF / Header
    </div>

    <h3>2ï¸âƒ£ Authorization Header æ²’é€</h3>
    <pre>
Authorization: Bearer &lt;jwt-token&gt;
  </pre>
    <p>è«‹åœ¨ Chrome F12 â†’ Network â†’ Request Headers ç¢ºèªã€‚</p>

    <h3>3ï¸âƒ£ CORS è¨­å®šéŒ¯èª¤ï¼ˆæœ€å¸¸è¦‹ï¼‰</h3>
    <p>
        å‰ç«¯ï¼š<code>http://localhost:5173</code><br>
        å¾Œç«¯ï¼š<code>http://localhost:8080</code><br>
        â†’ ä¸åŒ originï¼Œå¿…é ˆè¨­å®š CORS
    </p>

    <pre>
@Bean
public CorsConfigurationSource corsConfigurationSource() {
    CorsConfiguration config = new CorsConfiguration();
    config.setAllowedOrigins(List.of("http://localhost:5173"));
    config.setAllowedMethods(List.of("GET","POST","PUT","DELETE","OPTIONS"));
    config.setAllowedHeaders(List.of("*"));
    config.setAllowCredentials(true);

    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
    source.registerCorsConfiguration("/**", config);
    return source;
}
  </pre>

    <h3>4ï¸âƒ£ OPTIONS é æª¢è«‹æ±‚è¢«æ“‹</h3>
    <p>ç€è¦½å™¨æœƒå…ˆé€ OPTIONSï¼Œå¦‚æœæ²’æ”¾è¡Œå°±ç›´æ¥ 403ã€‚</p>

    <pre>
.requestMatchers(HttpMethod.OPTIONS, "/**").permitAll()
  </pre>

    <h3>5ï¸âƒ£ CSRF æ²’é—œ</h3>
    <p>JWT + å‰å¾Œç«¯åˆ†é›¢ï¼Œé€šå¸¸å¿…é ˆé—œ CSRFã€‚</p>

    <pre>
csrf(csrf -> csrf.disable())
  </pre>
</div>

<!-- 400 èªªæ˜ -->
<div class="card">
    <h2>æœ¬åœ°é–‹ç™¼æ™‚ 400 çš„å¸¸è¦‹åŸå› </h2>

    <ul>
        <li>@RequestBody ä½†å‰ç«¯æ²’é€ JSON</li>
        <li>Content-Type æœªè¨­ application/json</li>
        <li>DTO æ¬„ä½ç¼ºå¤±æˆ–å‹åˆ¥éŒ¯èª¤</li>
    </ul>

    <h3>Vue3 æ­£ç¢ºè«‹æ±‚ç¯„ä¾‹</h3>
    <pre>
axios.post('/api/login', data, {
  headers: {
    'Content-Type': 'application/json'
  }
})
  </pre>
</div>

<!-- é™¤éŒ¯æµç¨‹ -->
<div class="card">
    <h2>ğŸš€ å¿«é€Ÿé™¤éŒ¯å®šä½å¿ƒæ³•</h2>
    <table>
        <tr>
            <th>éŒ¯èª¤ç¾è±¡</th>
            <th>é¦–è¦æ‡·ç–‘å°è±¡</th>
        </tr>
        <tr>
            <td>Console å ± 403ï¼Œä½†å¾Œç«¯ Log æ²’å‹•éœ</td>
            <td>CORS è¨­å®š æˆ– Spring Security Filter</td>
        </tr>
        <tr>
            <td>å¾Œç«¯ Log å ± <code>Bad Credentials</code></td>
            <td>JWT SecretKey éŒ¯ä½ æˆ– éæœŸ</td>
        </tr>
        <tr>
            <td>å¾Œç«¯ Log æœ‰é€² Controller ä½†å™´ 400</td>
            <td>Jackson è§£æ DTO å¤±æ•— (æ¬„ä½åç¨±å°ä¸ä¸Š)</td>
        </tr>
    </table>
</div>
<ul id="messages"></ul>
<div id="social-share" style="margin-top: 20px;">
    <a id="fb-share" href="#" target="_blank" style="color: #4267B2; font-weight: bold;">åˆ†äº«åˆ° Facebook</a>
    <span> | </span>
    <a id="line-share" href="#" target="_blank" style="color: #00C300; font-weight: bold;">åˆ†äº«åˆ° Line</a>
    <span> | </span>
    <a id="twitter-share" href="#" target="_blank" style="color: #1DA1F2; font-weight: bold;">åˆ†äº«åˆ° X</a>
</div>
<script>
    // è‡ªå‹•æŠ“å–ç•¶å‰é é¢çš„ URL
    var currentUrl = window.location.href;
    // Facebook åˆ†äº«
    document.getElementById("fb-share").href =
        "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(currentUrl);
    // Line åˆ†äº«
    document.getElementById("line-share").href =
        "https://social-plugins.line.me/lineit/share?url=" + encodeURIComponent(currentUrl);
    // X (Twitter) åˆ†äº«
    document.getElementById("twitter-share").href =
        "https://twitter.com/intent/tweet?url=" + encodeURIComponent(currentUrl) + "&text=ä½ çš„æ–‡ç« æ¨™é¡Œ";
</script>
<footer style="text-align: center; background-color: purple; color:yellow; font-size: 50px">
    ä½œè€…ï¼š<a href="https://www.facebook.com/profile.php?id=100056441813114&locale=zh_TW" target="_blank" style="color:white;">å‘¨å½¥å»·</a>
    <br>å‰µä½œæ—¥æœŸï¼šè¥¿å…ƒäºŒé›¶äºŒäº”å¹´åäºŒæœˆåå››æ—¥<br>
    <img width="324" height="432" src="my_appearance2.jpg" alt="è‡ªæ‹">
    <br>
</footer>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v17.0" nonce="yourNonce">
</script>

<div class="fb-comments"
     data-href="https://chrischou19990904.github.io/harp_app_introduction"
     data-width="100%"
     data-numposts="5">
</div>
</body>
</html>